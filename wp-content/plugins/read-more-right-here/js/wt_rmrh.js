(function(c){var j={color:"#8C0913","font-weight":"bold",backgroundColor:"#ccc",border:"thin solid #8C0913",padding:"15px","text-align":"center"},f=0<RMRH_VALUES.loaderImageURL.length?c(new Image).attr("src",RMRH_VALUES.loaderImageURL).css("margin-left","10px"):!1,g=1==parseInt(RMRH_VALUES.duplicateLink),k=RMRH_VALUES.expandedText,h=0<RMRH_VALUES.expandedText.length,d=parseInt(RMRH_VALUES.animateSpeed),e={getItemId:function(a){a=a.attr("class").match("rmrh-itemId-([0-9]+)\\b");return 0<a.length?a[1]:
!1},hasEmbed:function(a){return 0<a.find("object").length},redirectIfNeeded:function(a){if(c.browser.msie){var b=parseInt(c.browser.version);if(6<b&&9>b&&e.hasEmbed(a.moreContentEl))window.location=a.linkEl.attr("href")}},ajaxClick:function(a){var b=a.data.MoreLink;b.ShowLoader();c.ajax({type:"POST",url:b.url,dataType:"html",cache:!1,data:{"wt-rmrh-redirect":"1",itemid:b.itemId},error:function(a,c,d){data="Sorry! There was an error retrieving content.<br>Click the link again to be taken to this entry's page.";
b.eventData.error=d;b.HandleAjaxComplete(data,!0)},success:function(a){b.HandleAjaxComplete(a,!1)}});return!1},setRedirectRequest:function(a){a.Process()}},i=function(a){this.linkEl=a;this.origContent=a.html();this.url=a.attr("href");this.itemId=e.getItemId(a);this.useImage=f?!0:!1;this.image=f?f.clone():"";this.cloneEl=this.CreateClone();this.cloneId=this.cloneEl.attr("id");this.clickHandler=e.ajaxClick;this.moreContentEl=!1;this.eventData={itemId:this.itemId,linkEl:this.linkEl,moreContentEl:!1,
error:!1};this.insertClone=function(){this.linkEl.siblings().last().after(this.cloneEl);this.insertClone=c.noop}},b=i.prototype;b.Process=function(){this.CanBeProcessed()&&(this.linkEl.addClass("rmrh-show-more"),this.BindClickHandler())};b.CanBeProcessed=function(){return!this.HasBeenProcessed()&&this.itemId};b.HasBeenProcessed=function(){return this.linkEl.hasClass("rmrh-show-more")||this.linkEl.hasClass("rmrh-show-less")};b.BindClickHandler=function(){this.linkEl.bind("click",{MoreLink:this},this.clickHandler)};
b.RemoveClickHandler=function(){this.linkEl.unbind("click",this.clickHandler)};b.Click=function(){this.linkEl.click()};b.HandleAjaxComplete=function(a,b){var d=c("<p/>").html(a).hide();this.RemoveClickHandler();this.LoadMoreContent(d);b?this.LoadError():(this.linkEl.toggle(c.proxy(this.ExpandContent,this),c.proxy(this.CollapseContent,this)),this.Click())};b.ExpandContent=function(){var a=this;a.ShowLoader();a.moreContentEl.slideDown(d,function(){a.HideLoader();a.moreContentEl.find("object").show();
h&&a.linkEl.html(k);g&&(a.insertClone(),a.cloneEl.html(a.linkEl.html()).show(),a.ToggleCloneClasses());a.ToggleClasses();a.Pub("RMRHContentExpanded")});return!1};b.CollapseContent=function(){var a=this;a.ShowLoader();g&&(a.cloneEl.hide(),a.ToggleCloneClasses());a.moreContentEl.find("object").hide();a.moreContentEl.slideUp(d,function(){a.HideLoader();h&&a.RestoreOriginalContent();a.ToggleClasses();a.Pub("RMRHContentCollapsed")});return!1};b.LoadMoreContent=function(a){this.moreContentEl=a;this.eventData.moreContentEl=
a;e.redirectIfNeeded(this);a.find("object").hide();this.useImage?this.image.after(a):this.linkEl.after(a)};b.LoadError=function(){var a=this;a.moreContentEl.css(j);a.moreContentEl.slideDown(d,function(){a.useImage&&a.image.fadeOut(d/2);a.Pub("RMRHContenLoadError")})};b.RestoreOriginalContent=function(){this.linkEl.html(this.origContent)};b.ShowLoader=function(){this.useImage&&this.linkEl.after(this.image.show())};b.HideLoader=function(){this.useImage&&this.image.fadeOut(d/2)};b.ToggleClasses=function(){this.linkEl.toggleClass("rmrh-show-more rmrh-show-less")};
b.ToggleCloneClasses=function(){this.cloneEl.toggleClass("rmrh-show-more rmrh-show-less")};b.CloneClickHandler=function(){var a=this,b=a.linkEl.offset().top-200,e=d/2,b=0>=b?0:b;a.cloneEl.offset().top-b>c(window).height()&&c("html,body").animate({scrollTop:b+"px"},e);setTimeout(function(){a.linkEl.trigger("click")},e);return!1};b.CreateClone=function(){var a=c.proxy(this.CloneClickHandler,this),b="rmrh-itemId-"+this.itemId+"-clone-"+(new Date).getTime();return this.linkEl.clone().attr("id",b).click(a)};
b.Pub=function(a){this.linkEl.trigger(a,this.eventData)};c.fn.ReadMoreRightHere=function(){var a=this;0<arguments.length&&(a=c(arguments[0]));0==c(a).length&&(a=document);c("a[class^=rmrh-itemId-]",a).each(function(){(new i(c(this))).Process()})};c(function(){c.fn.ReadMoreRightHere.call(document)})})(jQuery);